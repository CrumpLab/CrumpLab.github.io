<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="*May 5th, 2022* - An attempt to blog with pkgdown, including notes to self about how I did this. It was succesful enough that I'm using pkgdown for this blog.">
<title>Blogging with pkgdown? • crumplab</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../../apple-touch-icon-60x60.png">
<script src="../../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../../../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../../pkgdown.js"></script><meta property="og:title" content="Blogging with pkgdown?">
<meta property="og:description" content="*May 5th, 2022* - An attempt to blog with pkgdown, including notes to self about how I did this. It was succesful enough that I'm using pkgdown for this blog.">
<meta property="og:image" content="https://www.crumplab.com/articles/blog/post_999_5_17_22_blogging/imgs/blogging_with_pkgdown.jpg">
<meta property="og:image:alt" content="Crumplab.com logo">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@MattCrumpLab">
<meta name="twitter:site" content="@MattCrumpLab">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-HPGGT4QZ8Q"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HPGGT4QZ8Q');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../../../index.html">crumplab</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.0001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../../../articles/People.html">People</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../../articles/Publications.html">Pubs</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../../articles/Books.html">Books</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../../articles/Courses.html">Courses</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../../articles/Apps.html">Apps</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../../articles/Opportunities.html">Join</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../../../articles/index.html">Blog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../../articles/Fun.html">Fun</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/CrumpLab">
    <span class="fa fa-lg fa-github"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.youtube.com/c/CrumpsComputationalCognitionLab">
    <span class="fa fa-lg fa-youtube"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../../news/index.html">news</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../../reference/index.html">Reference</a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="../../../logo.png" class="logo" alt=""><h1>Blogging with pkgdown?</h1>
                        <h4 data-toc-skip class="author">Matt Crump</h4>
            
            <h4 data-toc-skip class="date">2022-05-17 Last knit: 2022-05-18</h4>
      
      
      <div class="d-none name"><code>post_999_5_17_22_blogging.Rmd</code></div>
    </div>

    
    
<p><img src="imgs/blogging_with_pkgdown.jpg" style='width="100%"/'></p>
<p>I like <a href="https://pkgdown.r-lib.org" class="external-link">pkgdown</a>. It’s great for what it was built to do (make websites for R packages), and it’s pretty good at other use cases as well. For example, I recently re-factored my lab webpage using pkgdown and that worked out well enough.</p>
<p>My previous website had a hacked together blog using demented combinations of R markdown templates. I was thinking about adopting some other blogging scheme like <a href="https://rstudio.github.io/distill/" class="external-link">distill</a>, but couldn’t get it to play nice with pkgdown. So, this is an attempt to blog in pkgdown and see how far that goes for me.</p>
<div class="section level2">
<h2 id="blogging-features-im-looking-for">Blogging features I’m looking for<a class="anchor" aria-label="anchor" href="#blogging-features-im-looking-for"></a>
</h2>
<p>Here’s of list of features I think I want for blogging. Making this list should help me figure out whether or not I can implement them in pkgdown.</p>
<ol style="list-style-type: decimal">
<li>Have an index page that lists all of the blog posts, and that is auto-magically generated from the blog posts</li>
<li>Have a “make_post()” type of function that makes a template for a new post all ready to go, and saved in the folder where it needs to be.</li>
<li>Have the posts be searchable in pkgdown</li>
<li>Have the posts use the same site-wide navigation as the rest of the site.</li>
</ol>
</div>
<div class="section level2">
<h2 id="implementing-the-blog-in-pkgdown">Implementing the blog in pkgdown<a class="anchor" aria-label="anchor" href="#implementing-the-blog-in-pkgdown"></a>
</h2>
<p>I think I can do most of what I want with pkgdown vignettes. One minor detail is that I’m not sure how easy it will be to customize the index page listing all of the blog posts. It would be nice to have a picture for each blog post, but that might not be an option without some meddling. Oh well. I’ll use the rest of this post to leave breadcrumbs for my future self on a blogging workflow.</p>
<div class="section level3">
<h3 id="make-a-blog-folder-in-vignettes">Make a blog folder in vignettes<a class="anchor" aria-label="anchor" href="#make-a-blog-folder-in-vignettes"></a>
</h3>
<p>Pkgdown automatically renders .Rmd files in the vignettes folder. I already have the main pages of the website in vignettes, so I’ll make a separate folder called <code>vignettes/blog</code> to hold all of the blog posts.</p>
</div>
<div class="section level3">
<h3 id="post-workflow">Post workflow<a class="anchor" aria-label="anchor" href="#post-workflow"></a>
</h3>
<p>I need to make some decisions here. Should I put individual vignettes in the blog folder, or should I make subdirectories for each post. What are the naming conventions?</p>
<p>This kind of structure might work. But, I need to check how the posts are rendered to the articles page.</p>
<pre><code>vignettes/blog
├── post_4_1_22_older_post
│   └── post_4_1_22_older_post.Rmd
└── post_5_17_22_blogging
    └── post_5_17_22_blogging.Rmd</code></pre>
</div>
</div>
<div class="section level2">
<h2 id="compiling-the-posts-using-build_articles">Compiling the posts using build_articles()<a class="anchor" aria-label="anchor" href="#compiling-the-posts-using-build_articles"></a>
</h2>
<p><code><a href="https://pkgdown.r-lib.org/reference/build_articles.html" class="external-link">pkgdown::build_articles()</a></code> will compile all of the .Rmds in the vignettes folder. The blog posts are in there, so they will be compiled to.</p>
<p>The same function also creates an <code>index.html</code> for the knitted vignettes. My plan is to use that page to list only blog posts, and not any other pages I have in the vignettes folder. This can be accomplished through <code>_pkgdown.yml</code>.</p>
<p>For example, the following creates some sections on the index.html, and uses <code>starts_with()</code> to loop through folders that start with <code>post</code> in the <code>blog</code> folder.</p>
<pre><code>articles:
- title: Newer Posts
  desc: Trying out blogging with pkgdown.
  navbar: ~
  contents:
  - starts_with("blog/post")
- title: Older Posts
  desc: Need to add links to older stuff here...
  navbar: ~</code></pre>
</div>
<div class="section level2">
<h2 id="ordering-posts-from-newest-to-oldest">Ordering posts from newest to oldest<a class="anchor" aria-label="anchor" href="#ordering-posts-from-newest-to-oldest"></a>
</h2>
<p>If I adopt the above naming convention <code>post_M_D_Y_title</code>, then posts get listed from oldest to newest on the index page. Need to flip that.</p>
<p>It seems like I would just need to sort the order of posts somehow, but I couldn’t figure that out.</p>
<p>I could use a naming convention with a number that gets smaller for every new post <code>post_number_M_D_Y_title</code>. That’s mildly annoying, but probably what I will do for now. Another option would be to override the _pkgdown.yml while running <code>build_articles()</code>. But this would require writing an alternative yml that lists the contents in a preferred order. That seems like too much work.</p>
<p>Decision was to start at 999, and count down. I probably won’t get to 0, and if I do, well that’s on me.</p>
<pre><code>vignettes/blog
├── post_998_5_17_22_blogging
│   └── post_998_5_17_22_blogging.Rmd
└── post_999_3_1_22_older_post
    └── post_999_3_1_22_older_post.Rmd</code></pre>
<div class="section level3">
<h3 id="helper-functions">helper functions<a class="anchor" aria-label="anchor" href="#helper-functions"></a>
</h3>
<p>Not sure that I need any helper functions. I was thinking about creating a <code>make_post</code> function in the spirit of <code>usethis:use_vignette()</code>. Maybe I’ll try that later. For now it wouldn’t be too bad to just copy/paste and reword stuff from a previous blog post.</p>
</div>
</div>
<div class="section level2">
<h2 id="custom-stuff">Custom stuff<a class="anchor" aria-label="anchor" href="#custom-stuff"></a>
</h2>
<p>I have a bunch of older blog pieces. I should consider migrating them over. Before I do that I should at least link to them.</p>
<p>I had fun adding banners to other pages on my lab website, and I would like to add a banner to the articles index.html to spice things up. Not sure yet how to do this…maybe an override with includes before body or something. I tried an override, but the outcome wasn’t pretty.</p>
<p>Next up is to hack the template. Looks like I need to make a template off of <code>content-article-index.html</code>.</p>
<ul>
<li>Make <code>inst/pkgdown/BS5/templates</code>
</li>
<li>copy in <code>content-article-index.html</code> from pkgdown templates</li>
<li>create a dummy R package for this repo, it’s called crumplab</li>
<li>list crumplab as package in template yml listing in <code>_pkgdown.yml</code>
</li>
<li>mod <code>content-article-index.html</code> and add my images etc.</li>
</ul>
<p>It worked I think. Note to self that the package needs to be rebuilt in order for any changes to the templates to take effect.</p>
</div>
<div class="section level2">
<h2 id="issues">Issues<a class="anchor" aria-label="anchor" href="#issues"></a>
</h2>
<p>I want to add unique twitter cards to the <code>articles/index.html</code> page, and to individual posts. I thought this would be easy, because <code>pkgdown</code> makes it easy to <a href="https://pkgdown.r-lib.org/articles/metadata.html?q=twitter#article-metadata" class="external-link">add twitter cards for each vignette</a>. However, it seems that any other cards are added on a site-wide basis, and defined in <code>_pkgdown.yml</code>. Additionally, it’s not clear how to set individual cards for pages like <code>articles/index.html</code>.</p>
<p>Solution was to write a custom version of <code>pkgdown::build_article_index()</code> that allowed to the override to be applied only to <code>articles/index.html</code>, and not to any the blog posts. A nice side effect was that I was planning to add some functions to a lab R package, so now I can put those in the R package for the crumplab website.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Matthew J. C. Crump.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
