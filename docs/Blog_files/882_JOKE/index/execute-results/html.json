{
  "hash": "0523cecfa58f72af64bfb32b1eaf9717",
  "result": {
    "markdown": "---\ntitle: \"Archiving the journal of knowledge\"\ndescription: \"Attempt to download some previous tweets before deleting an account.\"\nauthor: \"Matt Crump\"\ndate: '2022-10-28'\ndate-modified: last-modified\nimage: 'images/Journal_of_knowledge.png'\nopengraph:\n  twitter:\n    card: summary_large_image\n    creator: \"@MattCrumpLab\"\n    site: \"@MattCrumpLab\"\ncategories:\n  - social\n  - twitter\n  - mastodon\n---\n\n\nSome time ago I made a journal parody account on twitter called \"The Journal of Knowledge\" (circa 2018). It's still on twitter as of the writing of this post, but I stopped making new posts years ago. \n\nLast night I thought it was time to close down the account. I made a data request to twitter, but I'm not sure what data I get before I close the account. I recently got the `rtweet` package working, so I'm going to find out if I can use it to download the old posts. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rtweet)\n\nauth <- rtweet_app()\n\nJOKE_timeline <- rtweet::get_timeline(user=\"journal_O_K\",\n                              n = 200,\n                              token = auth)\n\nsaveRDS(JOKE_timeline,\"journal_of_knowledge.RDS\")\n```\n:::\n\n\nThat pulled all 173 tweets from the account into a data frame, and I saved it as an .RDS file so I can load it later. But, this did not download any of the pictures of the fake journal abstracts, and that is what I want to archive.\n\nThere's a function for screenshotting twitter posts, maybe I can use this.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nJOKE_timeline$id_str[3]\nmgk_img <- tweet_shot(JOKE_timeline$id_str[3], zoom = 3, scale = TRUE)\nmagick::image_write(mgk_img,\"test.png\")\n```\n:::\n\n\nNo, that function was deprecated.\n\nNeed to roll my own.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# get urls for images to download\nmedia_urls <- c()\n\nfor(i in 1:173){\n  media_urls[i] <- JOKE_timeline$entities[[i]]$media$media_url\n}\n\nmedia_urls <- media_urls[is.na(media_urls) == FALSE]\n\n# download all the images into folder\n\n?download.file\n\nfor (i in 2:length(media_urls)){\n  f_name <- tail(unlist(strsplit(media_urls[i],\"/\")),1)\n  f_path <- paste0(\"images/\",f_name)\n  \n  download.file(media_urls[i],f_path)\n}\n```\n:::\n\n\nI think I got what I wanted. Now, I just need to delete some stuff, and then maybe share a few Journal of Knowledge abstracts for posterity.\n\n## JOKE abstracts\n\nThere were 68 abstracts posted on the account, and I was able to download all of them. \n\n<div id=\"carouselExampleFade\" class=\"carousel slide carousel-fade\" data-bs-ride=\"carousel\">\n  <div class=\"carousel-inner\">\n    <div class=\"carousel-item active\">\n      <img src=\"images/Dfsb_x9VQAAD3sf.jpg\" class=\"d-block w-100\" alt=\"...\">\n    </div>\n    <div class=\"carousel-item\">\n      <img src=\"images/DgDIzZ0UEAAVpjn.jpg\" class=\"d-block w-100\" alt=\"...\">\n    </div>\n    <div class=\"carousel-item\">\n      <img src=\"images/Dgeny2fV4AAVcOl.jpg\" class=\"d-block w-100\" alt=\"...\">\n    </div>\n  </div>\n  <button class=\"carousel-control-prev\" type=\"button\" data-bs-target=\"#carouselExampleFade\" data-bs-slide=\"prev\">\n    <span class=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\n    <span class=\"visually-hidden\">Previous</span>\n  </button>\n  <button class=\"carousel-control-next\" type=\"button\" data-bs-target=\"#carouselExampleFade\" data-bs-slide=\"next\">\n    <span class=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\n    <span class=\"visually-hidden\">Next</span>\n  </button>\n</div>\n\n\n\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}