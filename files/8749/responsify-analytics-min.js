var PiwikAnalyticsTracker=(function($){var authorAffiliationTracker={category:"Search - Author Affiliation",generator:function(trackedContent){return trackedContent.replace(/\'[\s\S]+\'/g,"author");}};var connectAccountButton=function(action,accountType){return{category:"Accounts",generator:function(){return action+" ("+accountType+")";}};};var accountMenuTracker=function(menuText){return{category:"Accounts",generator:menuText};};var pageTrackers={_common:{"div#epmc_searchBanner #searchButton":{category:"Common - Search Button",generator:function(){return $("#textfield").val();}},"div#epmc_searchBanner a.advancedSearch":"Common - Advanced Search Link","div#epmc_pageHeader ul#epmc_mainNav div.logo a":"Common - Logo","div#epmc_pageHeader ul#epmc_mainNav ul.dropdown a[href*=About]":"Common - About Link","div#epmc_pageHeader ul#epmc_mainNav ul.dropdown a[href*=tools]":"Common - Tools Link","div#epmc_pageHeader ul#epmc_mainNav ul.dropdown a[href*=developers]":"Common - Developers Link","div#epmc_pageHeader ul#epmc_mainNav ul.dropdown a[href*=Help]":"Common - Help Link","div#epmc_pageHeader ul#epmc_mainNav ul.dropdown li.last a":"Common - Plus Link","div#epmc_pageHeader div.dark-gray a[href$=login]":"Common - Sign in Link","div#epmc_pageHeader div.dark-gray a[href$=registration]":"Common - Registration Link",".feedbackLink":"Common - Floating Feedback Link",".top-menu--my-account":"Accounts - Displayname",".top-menu--manage-account":"Accounts - Displayname","#top-menu--sign-out":"Accounts - Displayname","div#survey_close":"Survey - Close","#europepmc_survey button":"Survey - Take me to the survey","a#askMeLater":"Survey - Ask me later","a#donnotShowMeAgain":"Survey - Don't show again"},accounts:{"#orcid--signin-button":"Accounts Sign In","#login--epmc-signin-button":"Accounts Sign In","#login--twitter-signin":"Accounts Sign In","#login--create-account":"Accounts Sign In","#login--pmc-plus-signin":"Accounts Sign In",".forgottenPassword":"Accounts Sign In","#remember_me":"Accounts Sign In - Keep me signed in checkbox","#remember_me + label":"Accounts Sign In","#connect-accounts--connect-orcid":connectAccountButton("Connect","ORCID"),"#connect-accounts--connect-twitter":connectAccountButton("Connect","Twitter"),"#connect-accounts--connect-plus":connectAccountButton("Connect","Europe PMC Plus"),"#connect-accounts--connect-europepmc":connectAccountButton("Connect","Europe PMC"),"#connect-accounts--disconnect-orcid":connectAccountButton("Disconnect","ORCID"),"#connect-accounts--disconnect-twitter":connectAccountButton("Disconnect","Twitter"),"#connect-accounts--disconnect-plus":connectAccountButton("Disconnect","Europe PMC Plus"),"#connect-accounts--disconnect-europepmc":connectAccountButton("Disconnect","Europe PMC"),"#deleteAccountFormId input":"Accounts","#left-menu--saved-searches":accountMenuTracker("Saved searches"),"#left-menu--view-profile":accountMenuTracker("View author profile"),"#left-menu--claim-articles":accountMenuTracker("Claim articles"),"#left-menu--submit-manuscript":accountMenuTracker("Submit manuscript"),"#left-menu--manage-account":accountMenuTracker("Manage account"),"#accounts--connect-accounts-link":{category:"Accounts - Saved searches",generator:"Connect accounts link"},".accounts--left-sub-menu":{category:"Accounts - Left navigation sub-menu",generator:function(){return $(this).text().replace("- ","");}}},"abstract":{"a.return_to_search_results":"Abstract","ul[role='tablist'] li":"Abstract - Tabs","#twitter-widget-0":"Abstract - Tweet","div.page_info_margin a":"Abstract - Page Margin",".citation_navigation_selected":"Abstract - Page Margin","div.epmc_searchTools a":"Abstract - Tools","#yearly-citations-portlet--view-all":"Abstract - Citation graph","div.epmc_citationName a.clipboard":"Abstract - Add Citation to Export list",".author-name":"Abstract - Author Name",".author-refine-icon":"Abstract - Author List",".abs_link_metadata > a":"Abstract - Journal Link",".author-refine-href":authorAffiliationTracker,"div#grant_info a[id^=funder]":"Abstract - Funding","div#orcid_list a[href*=authors]":"Abstract - ORCID Profile Link","div#orcid_list a[href*=AUTHORID]":"Abstract - ORCID Pulbication Search Link","div.publisherLink .abs_publisher_link":"Abstract - Publisher Link","div#abs_highlight_terms div#caja > small > label":"Abstract - Highlight Terms","#highlight_bioentities_label img":"Abstract - Highlight Terms Tooltip",".abstract--author-affiliations-title":"Abstract - Expand Affiliations",".abstract--author-affiliation-text":"Abstract - Affiliation Name",'span:contains("DOI:") + span':"Abstract - DOI - link","div#fragment-related-citations a":"Abstract - Citations tab","div#fragment-related-bioentities a":"Abstract - BioEntities tab","div#fragment-related-pubmedarts a":"Abstract - Related Articles tab","div#fragment-related-labLinks a":{category:"Abstract - External Links tab",generator:function(){var $provider=$(this).closest(".container_info").find(".name_labs_links_provider");return $provider?$provider.text():"Unknown";}},"#annotation_legend_container .legenda_element_checkbox input":{category:"Annotations Abstract",generator:annotationCheckboxListener},"#annotation_legend_container .legenda_element_label":{category:"Annotations Abstract",generator:annotationLabelListener},"#annotation_legend_container .legenda_element_label_expandible":{category:"Annotations Abstract",generator:annotationLabelListener},"#abstract_text_plain .chemicals_annotation":"Annotations Abstract - Popup Chemical","#abstract_text_plain .disease_annotation":"Annotations Abstract - Popup Disease","#abstract_text_plain .go_terms_annotation":"Annotations Abstract - Popup GO Terms","#abstract_text_plain .genes_proteins_annotation":"Annotations Abstract - Popup Genes/Proteins","#abstract_text_plain .organisms_annotation":"Annotations Abstract - Popup Organisms","#abstract_text_plain .phosphorylate_annotation":"Annotations Abstract - Popup Phosphorylate Event","#abstract_text_plain .generef_annotation":"Annotations Abstract - Popup GeneRif","#abstract_text_plain .accession_numbers_annotation":"Annotations Abstract - Popup Accession Numbers","#abstract_text_plain .efo_annotation":"Annotations Abstract - Popup EFO",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_details":"Annotations Abstract - Details Link",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_search":"Annotations Abstract - Search Link",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_refine_search":"Annotations Abstract - Refine Search Link","#annotation_legend_container #legenda_annotation_header_help":"Annotations Abstract - Help","#annotation_legend_container .legenda_element .legend_up_down_icon .fa-chevron-up":"Annotations Abstract - Previous Term","#annotation_legend_container .legenda_element .legend_up_down_icon .fa-chevron-down":"Annotations Abstract - Next Term","#snippetSection ul li a":"Snippet Go Link","#checkbox_container_annotation_OPEN_TARGET":"Checkbox Gene-Disease Open Targets (both selection and deselection in the same event)","#checkbox_container_annotation_DISGENET":"Checkbox Gene-Disease DisGeNet (both selection and deselection in the same event)","#checkbox_container_annotation_INTACT":"Checkbox Protein Protein interactions IntAct (both selection and deselection in the same event)"},patents:{"div.epmc_citationName a.clipboard":"Patents - Add Citation to Export list","div.epmc_searchTools a":"Patents - Tools","div.page_info_margin a":"Patents - Page Margin",".citation_navigation_selected":"Patents - Page Margin",".author-name":"Abstract - Author Name",".author-refine-href":authorAffiliationTracker,"#annotation_legend_container .legenda_element_checkbox input":{category:"Annotations Abstract",generator:annotationCheckboxListener},"#annotation_legend_container .legenda_element_label":{category:"Annotations Abstract",generator:annotationLabelListener},"#annotation_legend_container .legenda_element_label_expandible":{category:"Annotations Abstract",generator:annotationLabelListener},"#abstract_text_plain .chemicals_annotation":"Annotations Abstract - Popup Chemical","#abstract_text_plain .disease_annotation":"Annotations Abstract - Popup Disease","#abstract_text_plain .go_terms_annotation":"Annotations Abstract - Popup GO Terms","#abstract_text_plain .genes_proteins_annotation":"Annotations Abstract - Popup Genes/Proteins","#abstract_text_plain .organisms_annotation":"Annotations Abstract - Popup Organisms","#abstract_text_plain .phosphorylate_annotation":"Annotations Abstract - Popup Phosphorylate Event","#abstract_text_plain .generef_annotation":"Annotations Abstract - Popup GeneRif","#abstract_text_plain .accession_numbers_annotation":"Annotations Abstract - Popup Accession Numbers","#abstract_text_plain .efo_annotation":"Annotations Abstract - Popup EFO",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_details":"Annotations Abstract - Details Link",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_search":"Annotations Abstract - Search Link",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_refine_search":"Annotations Abstract - Refine Search Link","#annotation_legend_container #legenda_annotation_header_help":"Annotations Abstract - Help","#annotation_legend_container .legenda_element .legend_up_down_icon .fa-chevron-up":"Annotations Abstract - Previous Term","#annotation_legend_container .legenda_element .legend_up_down_icon .fa-chevron-down":"Annotations Abstract - Next Term",},guidelines:{"#annotation_legend_container .legenda_element_checkbox input":{category:"Annotations Abstract",generator:annotationCheckboxListener},"#annotation_legend_container .legenda_element_label":{category:"Annotations Abstract",generator:annotationLabelListener},"#annotation_legend_container .legenda_element_label_expandible":{category:"Annotations Abstract",generator:annotationLabelListener},"#abstract_text_plain .chemicals_annotation":"Annotations Abstract - Popup Chemical","#abstract_text_plain .disease_annotation":"Annotations Abstract - Popup Disease","#abstract_text_plain .go_terms_annotation":"Annotations Abstract - Popup GO Terms","#abstract_text_plain .genes_proteins_annotation":"Annotations Abstract - Popup Genes/Proteins","#abstract_text_plain .organisms_annotation":"Annotations Abstract - Popup Organisms","#abstract_text_plain .phosphorylate_annotation":"Annotations Abstract - Popup Phosphorylate Event","#abstract_text_plain .generef_annotation":"Annotations Abstract - Popup GeneRif","#abstract_text_plain .accession_numbers_annotation":"Annotations Abstract - Popup Accession Numbers","#abstract_text_plain .efo_annotation":"Annotations Abstract - Popup EFO",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_details":"Annotations Abstract - Details Link",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_search":"Annotations Abstract - Search Link",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_refine_search":"Annotations Abstract - Refine Search Link","#annotation_legend_container #legenda_annotation_header_help":"Annotations Abstract - Help","#annotation_legend_container .legenda_element .legend_up_down_icon .fa-chevron-up":"Annotations Abstract - Previous Term","#annotation_legend_container .legenda_element .legend_up_down_icon .fa-chevron-down":"Annotations Abstract - Next Term",},theses:{"#annotation_legend_container .legenda_element_checkbox input":{category:"Annotations Abstract",generator:annotationCheckboxListener},"#annotation_legend_container .legenda_element_label":{category:"Annotations Abstract",generator:annotationLabelListener},"#annotation_legend_container .legenda_element_label_expandible":{category:"Annotations Abstract",generator:annotationLabelListener},"#abstract_text_plain .chemicals_annotation":"Annotations Abstract - Popup Chemical","#abstract_text_plain .disease_annotation":"Annotations Abstract - Popup Disease","#abstract_text_plain .go_terms_annotation":"Annotations Abstract - Popup GO Terms","#abstract_text_plain .genes_proteins_annotation":"Annotations Abstract - Popup Genes/Proteins","#abstract_text_plain .organisms_annotation":"Annotations Abstract - Popup Organisms","#abstract_text_plain .phosphorylate_annotation":"Annotations Abstract - Popup Phosphorylate Event","#abstract_text_plain .generef_annotation":"Annotations Abstract - Popup GeneRif","#abstract_text_plain .accession_numbers_annotation":"Annotations Abstract - Popup Accession Numbers","#abstract_text_plain .efo_annotation":"Annotations Abstract - Popup EFO",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_details":"Annotations Abstract - Details Link",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_search":"Annotations Abstract - Search Link",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_refine_search":"Annotations Abstract - Refine Search Link","#annotation_legend_container #legenda_annotation_header_help":"Annotations Abstract - Help","#annotation_legend_container .legenda_element .legend_up_down_icon .fa-chevron-up":"Annotations Abstract - Previous Term","#annotation_legend_container .legenda_element .legend_up_down_icon .fa-chevron-down":"Annotations Abstract - Next Term",},articles:{"a.return_to_search_results":"Full Text","ul.ui-tabs-nav li":"Full Text - Tabs","div.page_info_margin a":"Full Text - Page Margin",".citation_navigation_selected":"Full Text - Page Margin",".doi a":"Full Text - DOI","div.epmc_searchTools a":"Full Text - Tools","div.clipboard_icon a":"Full Text - Add Citation to Export list","#logo-imagemap":"Full Text - Journal Banner Image",".fm-author a":"Full Text - Author Name",".fm-authors-info + .togglers > a":"Full Text","div#fragment-related-citations a":"Full Text - Citations tab","div#fragment-related-bioentities a":"Full Text - BioEntities tab","div#fragment-related-pubmedarts a":"Full Text - Related Articles tab","div#fragment-related-labLinks a":{category:"Full Text - External Links tab",generator:function(){var $provider=$(this).closest(".container_info").find(".name_labs_links_provider");return $provider?$provider.text():"Unknown";}},".small-thumb":"Full Text - Figures","a[target='table']":"Full Text - Tables",".goto a":{category:"Full Text - Goto",generator:"Menu Dropdown"},".ui-ncbilinksmenu li[role=presentation]":"Full Text - Goto","#reference-list a":"Full Text - Reference","#annotation_legend_container .legenda_element_checkbox input":{category:"Annotations Full Text",generator:annotationCheckboxListener},"#annotation_legend_container .legenda_element_label":{category:"Annotations Full Text",generator:annotationLabelListener},"#annotation_legend_container .legenda_element_label_expandible":{category:"Annotations Full Text",generator:annotationLabelListener},"#annotation_legend_container .legenda_element .legend_up_down_icon .fa-chevron-up":"Annotations Full Text - Previous Term","#annotation_legend_container .legenda_element .legend_up_down_icon .fa-chevron-down":"Annotations Full Text - Next Term","#fragment-fulltext .chemicals_annotation":"Annotations Full Text - Popup Chemical","#fragment-fulltext .disease_annotation":"Annotations Full Text - Popup Disease","#fragment-fulltext .go_terms_annotation":"Annotations Full Text - Popup GO Terms","#fragment-fulltext .genes_proteins_annotation":"Annotations Full Text - Popup Genes/Proteins","#fragment-fulltext .organisms_annotation":"Annotations Full Text - Popup Organisms","#fragment-fulltext .phosphorylate_annotation":"Annotations Full Text - Popup Phosphorylate Event","#fragment-fulltext .generef_annotation":"Annotations Full Text - Popup GeneRif","#fragment-fulltext .accession_numbers_annotation":"Annotations Full Text - Popup Accession Numbers","#fragment-fulltext .efo_annotation":"Annotations Full Text - Popup EFO",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_details":"Annotations Full Text - Details Link",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_search":"Annotations Full Text - Search Link",".choiceFeedbackRDF .choice_feedback_annotation":"Annotations Full Text - Feedback",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_feedback":"Annotations Full Text - Feedback",".menu_annotation_rdf .menu_annotation_single_links .menu_annotation_refine_search":"Annotations Full Text - Refine Search Link","#annotation_legend_container #legenda_annotation_header_help":"Annotations Full Text - Help","#checkbox_container_annotation_OPEN_TARGET":"Checkbox Gene-Disease Open Targets (both selection and deselection in the same event)","#checkbox_container_annotation_DISGENET":"Checkbox Gene-Disease DisGeNet (both selection and deselection in the same event)","#checkbox_container_annotation_INTACT":"Checkbox Protein Protein interactions IntAct (both selection and deselection in the same event)"},search:{".batch-select":"Add All citations to Export",".search-citation-item .clipboard_icon":"Add citation to Export","div.results_list a.resultLink":"Search - Full Text Link",".rss-link":"Search","#searchTools a":"Search - Tools",".sort-by-option":"Search - Sort by",".author-name":"Search - Author Name","#contentShortcuts a":{category:"Search - Page Margin",generator:function(trackedContent){return trackedContent.replace(/\([0-9]+\)/g,"").trim();}},".author-refine-href":authorAffiliationTracker,".pageButtons a":"Search - Pagination",".pageLinks > span":{category:"Search - Pagination",generator:function(trackedContent){(trackedContent==="...")&&(trackedContent="Dots");return trackedContent;}},".save-search-require-login #buttons_container input":"Save Search - Require Login",".save-search-logined #buttons_container input":"Save Search - Name Search","#filters-years-list li a":"Date Selection in Date Filter","#filters--search-button":"Filter Search Button in Date Filter"},orcid:{"#startOrcidClaiming":"Orcid Claiming Tool",".orcid_nav_btn_cont":"Orcid Claiming Tool - Step 1",".sel_link":"Orcid Claiming Tool - Step 1","#open_orcid_tip":"Orcid Claiming Tool",".orcid_nav_btn_sub":"Orcid Claiming Tool - Step 2",".orcid_nav_btn_back":"Orcid Claiming Tool - Step 2"},grantfinder:{".active-grants-only":"Grant Finder - Criteria","#exportGrantsLink":"Grant Finder - Search Results",".publicationLink":{category:"Grant Finder - Search Results",generator:"All Publications of the Grant"},".epmcFreeFullTextArticles":{category:"Grant Finder - Search Results",generator:"Full Text Publications of the Grant"},"#grantPersonList":"Grant Finder - Grant Details - PI","#institutionName":"Grant Finder - Grant Details - Affiliation","#authorProfileLink":"Grant Finder - Grant Details - Author Profile","#orcidId":"Grant Finder - Grant Details - ORCID","#grantFunderName":"Grant Finder - Grant Details - Funder Name",".allPublicationsString":"Grant Finder - Grant Details - All Publications",".fullTextPublicationsString":"Grant Finder - Grant Details - All Free Text Publications"},authors:{"#authors--link-your-articles":"Author Profile"},Help:{".tableofcontents a[href=#directsearch]":"Help - Table of Content",".tableofcontents a[href=#fieldsearch]":"Help - Table of Content"}};var delayedTrackers={"Save Search":{".save_search_modal.save-search-require-login #buttons_container input":"Save Search - Require Login",".save_search_modal.save-search-logined #buttons_container input":"Save Search - Name Search"}};function clean(text){return text.replace(/(\r\n|\n|\r)/gm,"").replace(/[^\x00-\x7F]/g,"").trim();}function annotationCheckboxListener(){var idCheckbox=$(this).attr("id");var stateCheckbox;if(($("#"+idCheckbox).attr("checked")=="checked")||($("#"+idCheckbox).prop("checked")==true)){stateCheckbox="off";}else{stateCheckbox="on";}var checkBoxType=$(this).parent().parent().find(".legenda_element_label_expandible").text();if(checkBoxType==undefined||checkBoxType==""){checkBoxType=$(this).parent().parent().find(".legenda_element_label").text();}checkBoxType=checkBoxType.replace(/\([\s\S]+\)/g,"").trim();return"Checkbox "+checkBoxType+" - "+stateCheckbox;}function annotationLabelListener(){var checkBoxType=$(this).text().replace(/\([\s\S]+\)/g,"").trim();var stateCheckbox;var idCheckbox=$(this).parent().find(".legenda_element_checkbox input").attr("id");if(($("#"+idCheckbox).attr("checked")=="checked")||($("#"+idCheckbox).prop("checked")==true)){stateCheckbox="off";}else{stateCheckbox="on";}return"Checkbox "+checkBoxType+" - "+stateCheckbox;}function initHandlers(trackers){var handlers={};var targets=Object.keys(trackers);var numberOfTargets=targets.length;for(var i=0;i<numberOfTargets;i++){handlers[targets[i]]=(function(trackedCategory){return function(e){analyticsTrackInteraction(e.currentTarget,trackedCategory);};})(trackers[targets[i]]);}return handlers;}function analyticsTrackInteraction(target,trackedCategory){var $target=$(target);var trackedContent=$target.text();trackedContent=clean(trackedContent);if(!trackedContent){trackedContent=($target.attr("alt")||"").trim();}if(!trackedContent){trackedContent=($target.attr("title")||"").trim();}if(!trackedContent){trackedContent=($target.attr("src")||"").split("/").last().trim();}if(!trackedContent){trackedContent=$target.val()||"";}if($target.attr("href")){trackedContent+=($target.attr("href").indexOf("extredirect=")>0)?" - External":"";}if($.isPlainObject(trackedCategory)){trackedContent=$.isFunction(trackedCategory.generator)?trackedCategory.generator.call($target,trackedContent):trackedCategory.generator;trackedCategory=trackedCategory.category;}console.log("UI - UI Element / "+trackedCategory+" - "+trackedContent);epmc.ensure(window,"_paq",function(){_paq.push(["trackEvent","UI","UI Element / "+trackedCategory,""+trackedContent]);});}function manualTracking(source,category,trackedContent){epmc.ensure(window,"_paq",function(){trackedContent=clean(trackedContent);console.log([source,source+" / "+category,trackedContent].join(" - "));_paq.push(["trackEvent",source,source+" / "+category,trackedContent]);});}function delayedTracking(key){if(!delayedTrackers.hasOwnProperty(key)){return;}var trackers=delayedTrackers[key],handlers=initHandlers(trackers),targets=Object.keys(trackers),num=targets.length;for(var i=0;i<num;i++){var target=targets[i],handler=handlers[target],loadedTarget="body.piwik-loaded "+target;$(loadedTarget)&&$(loadedTarget).off("mousedown").on("mousedown",handler);}}function tracking(){var pagePath=location.pathname.split("/")[1],currentPageTrackers=pageTrackers[pagePath];registerEvent(pageTrackers._common);currentPageTrackers&&registerEvent(currentPageTrackers);function registerEvent(trackers){var handlers=initHandlers(trackers);var targets=Object.keys(trackers);var num=targets.length;for(var i=0;i<num;i++){var target=targets[i],handler=handlers[target];$("body.piwik-loaded").off("mousedown",target).on("mousedown",target,handler);}}console.log("Piwik event registration done");}function trackMouseenterEvents(){$("body.piwik-loaded").off("mouseenter").on("mouseenter","#yearly-citations-portlet--graph",function(){var url=location.href.toLowerCase();if(url.indexOf("abstract")>=0){manualTracking("Abstract","Citation Graph","Mouse enter");}if(url.indexOf("articles")>=0){manualTracking("Articles","Citation Graph","Mouse enter");}});}function init(){var _paq=_paq||[];epmc.ensure(window,"_paq",function(){$("body").addClass("piwik-loaded");if(!Array.prototype.last){Array.prototype.last=function(){return this[this.length-1];};}tracking();trackMouseenterEvents();console.log("Piwik event initialisation done");});}init();return{track:manualTracking,delayedTrack:delayedTracking};})(jQuery);